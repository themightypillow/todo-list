(()=>{"use strict";const e=document.createElementNS("http://www.w3.org/2000/svg","svg");e.setAttributeNS(null,"width","20"),e.setAttributeNS(null,"height","20"),e.setAttributeNS(null,"viewBox","0 0 24 24"),e.setAttributeNS(null,"stroke-width","1.5"),e.setAttributeNS(null,"stroke","#00aaff"),e.setAttributeNS(null,"fill","none"),e.setAttributeNS(null,"stroke-linecap","round"),e.setAttributeNS(null,"stroke-linejoin","round");const t=document.createElementNS("http://www.w3.org/2000/svg","path");t.setAttributeNS(null,"stroke","none"),t.setAttributeNS(null,"d","M0 0h24v24H0z"),t.setAttributeNS(null,"fill","none"),e.appendChild(t);const n=e=>{const t=document.createElementNS("http://www.w3.org/2000/svg","line");return t.setAttributeNS(null,"x1",e.x1),t.setAttributeNS(null,"y1",e.y1),t.setAttributeNS(null,"x2",e.x2),t.setAttributeNS(null,"y2",e.y2),t},l=(()=>{const t=e.cloneNode(!0);return[{x1:"9",y1:"6",x2:"20",y2:"6"},{x1:"9",y1:"12",x2:"20",y2:"12"},{x1:"9",y1:"18",x2:"20",y2:"18"},{x1:"5",y1:"6",x2:"5",y2:"6.01"},{x1:"5",y1:"12",x2:"5",y2:"12.01"},{x1:"5",y1:"18",x2:"5",y2:"18.01"}].forEach((e=>t.appendChild(n(e)))),t})(),o=(()=>{const t=e.cloneNode(!0);return[{x1:"12",y1:"5",x2:"12",y2:"19"},{x1:"5",y1:"12",x2:"19",y2:"12"}].forEach((e=>t.appendChild(n(e)))),t})(),r=(()=>{const e=[],t=()=>{localStorage.setItem("project-total",e.length)},n=t=>{const n=e.length,l=((e,t)=>{const n=[],l=()=>{localStorage.setItem(`project-${t}`,JSON.stringify({name:e,tasks:n.map((e=>e.toObject()))}))};return{setName:t=>e=t,getName:()=>e,store:l,add:(e,t,o,r)=>{const c=n.length;return n.push(((e,t,n,l,o)=>{let r=!1;return{getId:()=>e,toggleDone:()=>r=!r,togglePrio:()=>o=!o,setTitle:e=>t=e,setDesc:e=>n=e,setDue:e=>l=e,toObject:()=>({title:t,desc:n,dueDate:l,prio:o})}})(n.length,e,t,o,r)),l(),c},remove:e=>n.splice(e.getId(),1)}})(t,n);return l.store(),e.push(l),n};return{store:t,load:()=>{if(0===localStorage.length)n("My Tasks"),t();else if(localStorage.getItem("project-total")){const e=Number(localStorage.getItem("project-total"));if(Number.isInteger(e))for(let t=0;t<e;t++){const e=JSON.parse(localStorage.getItem(`project-${t}`));n(e.name)}else localStorage.clear(),n("My Tasks"),t()}},add:n,at:t=>e[t],names:()=>e.map((e=>e.getName()))}})();(()=>{const e=e=>{var t;t=e.querySelector("h4"),document.querySelectorAll(".group > h4").forEach((e=>e.classList.remove("bold"))),t.classList.add("bold");const n=document.querySelector("main");for(;n.firstChild;)n.removeChild(n.firstChild);const l=document.createElement("h2");l.textContent=e.textContent,n.appendChild(l);const r=document.createElement("div");r.classList.add("icon-label","add"),r.appendChild(o);const c=document.createElement("div");c.textContent="Add Task",r.appendChild(c),r.addEventListener("click",(t=>{const n=document.querySelector("#task-form");n.dataset.index=e.dataset.index,n.style.display="block"})),n.appendChild(r)},t=(t,n)=>{const o=document.querySelector("#projects"),r=document.createElement("div");r.classList.add("icon-label","group"),r.appendChild(l.cloneNode(!0));const c=document.createElement("h4");return c.textContent=t,r.appendChild(c),r.addEventListener("click",(t=>e(t.currentTarget))),r.dataset.index=n,o.appendChild(r),r};r.load(),r.names().forEach(((e,n)=>t(e,n))),e(document.querySelector("#projects > div")),document.querySelectorAll(".group").forEach((t=>{t.addEventListener("click",(t=>e(t.currentTarget)))})),document.querySelectorAll("form > input[type='text']").forEach((e=>{e.addEventListener("keypress",(e=>{"Enter"===e.key&&e.preventDefault()}))})),function(){const n=document.querySelector("#add-project"),l=document.querySelector("#project-form");n.addEventListener("click",(e=>{l.style.display="block"}));const o=document.querySelector("#new-project-name");document.querySelector("#cancel-project").addEventListener("click",(e=>{e.preventDefault(),o.value="",l.style.display="none"})),document.querySelector("#submit-project").addEventListener("click",(n=>{n.preventDefault(),l.style.display="none";const c=""===o.value?"Untitled":o.value;o.value="";const a=r.add(c);r.store(),e(t(c,a))}))}(),function(){const e=document.querySelector("#task-form"),t=document.querySelector("#new-task-title"),n=document.querySelector("#new-task-desc"),l=document.querySelector("#new-task-due"),o=document.querySelector("#new-task-prio"),c=()=>{t.value="",n.value="",l.value="",o.checked=!1,e.style.display="none"};document.querySelector("#cancel-task").addEventListener("click",(e=>{e.preventDefault(),c()})),document.querySelector("#submit-task").addEventListener("click",(a=>{if(a.preventDefault(),t.value){const c=new Date(l.value?new Date(l.value.replaceAll("-","/")):new Date);r.at(e.dataset.index).add(t.value,n.value,c,o.checked),(e=>{const t=document.createElement("div");t.classList.add("icon-label");const n=document.createElement("input");n.setAttribute("type","checkbox");const l=document.createElement("label");l.textContent=e,t.appendChild(n),t.appendChild(l);const o=document.querySelector("main"),r=document.querySelector("main > .add");o.insertBefore(t,r)})(t.value)}c()}))}()})()})();