(()=>{"use strict";const e=document.createElementNS("http://www.w3.org/2000/svg","svg");e.setAttributeNS(null,"width","20"),e.setAttributeNS(null,"height","20"),e.setAttributeNS(null,"viewBox","0 0 24 24"),e.setAttributeNS(null,"stroke-width","1.5"),e.setAttributeNS(null,"fill","none"),e.setAttributeNS(null,"stroke-linecap","round"),e.setAttributeNS(null,"stroke-linejoin","round");const t=document.createElementNS("http://www.w3.org/2000/svg","path");t.setAttributeNS(null,"stroke","none"),t.setAttributeNS(null,"d","M0 0h24v24H0z"),t.setAttributeNS(null,"fill","none"),e.appendChild(t);const n=e=>{const t=document.createElementNS("http://www.w3.org/2000/svg","line");return t.setAttributeNS(null,"x1",e.x1),t.setAttributeNS(null,"y1",e.y1),t.setAttributeNS(null,"x2",e.x2),t.setAttributeNS(null,"y2",e.y2),t},l=e=>{const t=document.createElementNS("http://www.w3.org/2000/svg","circle");return t.setAttributeNS(null,"cx",e.cx),t.setAttributeNS(null,"cy",e.cy),t.setAttributeNS(null,"r",e.r),t},d=e=>{const t=document.createElementNS("http://www.w3.org/2000/svg","path");return t.setAttributeNS(null,"d",e),t},o=(()=>{const t=e.cloneNode(!0);return t.setAttributeNS(null,"stroke","#00aaff"),t.appendChild(n({x1:"9",y1:"6",x2:"20",y2:"6"})),t.appendChild(n({x1:"9",y1:"12",x2:"20",y2:"12"})),t.appendChild(n({x1:"9",y1:"18",x2:"20",y2:"18"})),t.appendChild(n({x1:"5",y1:"6",x2:"5",y2:"6.01"})),t.appendChild(n({x1:"5",y1:"12",x2:"5",y2:"12.01"})),t.appendChild(n({x1:"5",y1:"18",x2:"5",y2:"18.01"})),t})(),c=(()=>{const t=e.cloneNode(!0);return t.setAttributeNS(null,"stroke","#00aaff"),t.appendChild(n({x1:"12",y1:"5",x2:"12",y2:"19"})),t.appendChild(n({x1:"5",y1:"12",x2:"19",y2:"12"})),t})(),r=(()=>{const t=e.cloneNode(!0);return t.setAttributeNS(null,"stroke","#c8c8c8"),t.appendChild(l({cx:"12",cy:"12",r:"9"})),t})(),a=(r.cloneNode(!0).setAttributeNS(null,"stroke","#dc4c3f"),r.cloneNode(!0).appendChild(d("M9 12l2 2l4 -4")),(()=>{const t=e.cloneNode(!0);return t.setAttributeNS(null,"stroke","#dc4c3f"),t.appendChild(n({x1:"10",y1:"11",x2:"10",y2:"17"})),t.appendChild(n({x1:"14",y1:"11",x2:"14",y2:"17"})),t.appendChild(n({x1:"4",y1:"7",x2:"20",y2:"7"})),t.appendChild(d("M5 7l1 12a2 2 0 0 0 2 2h8a2 2 0 0 0 2 -2l1 -12")),t.appendChild(d("M9 7v-3a1 1 0 0 1 1 -1h4a1 1 0 0 1 1 1v3")),t})()),s=(()=>{const t=e.cloneNode(!0);return t.setAttributeNS(null,"stroke","#c8c8c8"),t.appendChild(d("M11.795 21h-6.795a2 2 0 0 1 -2 -2v-12a2 2 0 0 1 2 -2h12a2 2 0 0 1 2 2v4")),t.appendChild(l({cx:"18",cy:"18",r:"4"})),t.appendChild(d("M15 3v4")),t.appendChild(d("M7 3v4")),t.appendChild(d("M3 11h16")),t.appendChild(d("M18 16.496v1.504l1 1")),t})(),i=(()=>{const t=e.cloneNode(!0);return t.setAttributeNS(null,"stroke","#00aaff"),t.appendChild(d("M9 7h-3a2 2 0 0 0 -2 2v9a2 2 0 0 0 2 2h9a2 2 0 0 0 2 -2v-3")),t.appendChild(d("M9 15h3l8.5 -8.5a1.5 1.5 0 0 0 -3 -3l-8.5 8.5v3")),t.appendChild(n({x1:"16",y1:"5",x2:"19",y2:"8"})),t})(),u=(()=>{let e=[];const t=()=>{d(l("My Tasks")).store(),n()},n=()=>{localStorage.setItem("project-total",e.length)},l=t=>{const n=e.length,l=((e,t)=>{const n=[],l=()=>n.map((e=>e.info()));return{setName:t=>e=t,getName:()=>e,setId:e=>t=e,store:()=>{localStorage.setItem(`project-${t}`,JSON.stringify({name:e,tasks:l()}))},add:(e,t,l,d)=>n.push(((e,t,n,l)=>{let d=!1;return{toggleDone:()=>d=!d,togglePrio:()=>l=!l,setTitle:t=>e=t,setDesc:e=>t=e,setDue:e=>n=e,info:()=>({title:e,desc:t,due:n,prio:l})}})(e,t,l,d))-1,remove:e=>n.splice(e.getId(),1),all:l}})(t,n);return e.push(l),n},d=t=>e[t];return{store:n,load:()=>{if(0===localStorage.length)t();else if(localStorage.getItem("project-total")){const n=Number(localStorage.getItem("project-total"));if(Number.isInteger(n))for(let d=0;d<n;d++){if(!localStorage.getItem(`project-${d}`)){localStorage.clear(),e=[],t();break}const n=JSON.parse(localStorage.getItem(`project-${d}`)),o=l(n.name);n.tasks.forEach((t=>{e[o].add(t.title,t.desc,new Date(t.due),t.prio)}))}else localStorage.clear(),t()}},add:l,at:d,names:()=>e.map((e=>e.getName()))}})(),p=e=>{for(;e.firstChild;)e.removeChild(e.firstChild)},m=()=>{const e=document.createElement("button");e.textContent="Cancel";const t=document.createElement("button");t.textContent="Ok";const n=document.createElement("div");return n.appendChild(e),n.appendChild(t),n};(()=>{const e=e=>{const t=document.createElement("div");t.classList.add("icon-label");const n=document.createElement("label");n.textContent=e.title,t.appendChild(r.cloneNode(!0)),t.appendChild(n);const l=document.querySelector("main");n.addEventListener("click",(t=>(e=>{const t=document.querySelector("#task-info");p(t);const n=document.createElement("div");n.appendChild(r.cloneNode(!0)),n.appendChild(i.cloneNode(!0)),t.appendChild(n);const l=document.createElement("h3");l.textContent=e.title,t.appendChild(l);const d=document.createElement("div");d.textContent=e.desc,t.appendChild(d);const o=document.createElement("div");o.classList.add("icon-label"),o.appendChild(s);const c=document.createElement("div");c.textContent=e.due.toDateString().replace(" ",", "),o.appendChild(c),t.appendChild(o)})(e)));const d=document.querySelector("main > .add");l.insertBefore(t,d)},t=e=>{const t=document.querySelector("#project-form > form"),n=document.createElement("div"),l=document.createElement("h3"),d=document.querySelector("#new-project-name"),o=e.querySelector("h4");d.value=o.textContent,l.textContent="Edit Project",n.appendChild(l),n.appendChild(a),t.insertBefore(n,d);const c=m();t.appendChild(c),c.firstChild.addEventListener("click",(e=>{e.preventDefault(),r.style.display="none",d.value="",t.removeChild(n),t.removeChild(c)})),c.lastChild.addEventListener("click",(l=>{l.preventDefault(),o.textContent=d.value,o.classList.contains("bold")&&(document.querySelector("#project-header > h2").textContent=d.value);const a=u.at(e.dataset.index);a.setName(d.value),a.store(),r.style.display="none",d.value="",t.removeChild(n),t.removeChild(c)}));const r=document.querySelector("#project-form");r.style.display="block"},n=n=>{var l;l=n.querySelector("h4"),document.querySelectorAll(".project > h4").forEach((e=>e.classList.remove("bold"))),l.classList.add("bold");const d=document.querySelector("main");d.dataset.index=n.dataset.index,p(d),p(document.querySelector("#task-info"));const o=document.createElement("div"),r=document.createElement("h2");r.textContent=n.textContent,o.appendChild(r);const a=i.cloneNode(!0);a.addEventListener("click",(e=>{const n=document.querySelector("main").dataset.index;t(document.querySelector(`.project[data-index="${n}"]`))})),o.appendChild(a),o.id="project-header",d.appendChild(o),u.at(n.dataset.index).all().forEach(((t,n)=>e({index:n,...t})));const s=document.createElement("div");s.classList.add("icon-label","add"),s.appendChild(c);const m=document.createElement("div");m.textContent="Add Task",s.appendChild(m),s.addEventListener("click",(e=>{const t=document.querySelector("#task-form");t.dataset.index=n.dataset.index,t.style.display="block"})),d.appendChild(s)},l=(e,l)=>{const d=document.querySelector("#projects"),c=document.createElement("div");c.classList.add("icon-label","project"),c.appendChild(o.cloneNode(!0));const r=document.createElement("h4");r.textContent=e,c.appendChild(r),c.addEventListener("click",(e=>n(e.currentTarget))),c.dataset.index=l;const a=document.createElement("div");a.classList.add("project-sidebar"),a.appendChild(c);const s=i.cloneNode(!0);return s.classList.add("edit"),s.style.display="none",a.appendChild(s),s.addEventListener("click",(e=>{t(c)})),a.addEventListener("mouseover",(e=>{e.currentTarget.querySelector(".edit").style.display="block"})),a.addEventListener("mouseout",(e=>{e.currentTarget.querySelector(".edit").style.display="none"})),d.appendChild(a),c};u.load(),u.names().forEach(((e,t)=>l(e,t))),n(document.querySelector(".project")),document.querySelectorAll("form > input[type='text']").forEach((e=>{e.addEventListener("keypress",(e=>{"Enter"===e.key&&e.preventDefault()}))})),function(){const e=document.querySelector("#project-form > form"),t=document.querySelector("#new-project-name"),d=e.parentElement,o=document.createElement("h3");o.textContent="New Project";const c=m();c.firstChild.addEventListener("click",(n=>{n.preventDefault(),t.value="",d.style.display="none",e.removeChild(o),e.removeChild(c)})),c.lastChild.addEventListener("click",(r=>{r.preventDefault(),d.style.display="none",e.removeChild(o),e.removeChild(c);const a=""===t.value?"Untitled":t.value;t.value="";const s=u.add(a);u.store(),u.at(s).store(),n(l(a,s))})),document.querySelector("#add-project").addEventListener("click",(n=>{e.insertBefore(o,t),e.appendChild(c),d.style.display="block"}))}(),function(){const t=document.querySelector("#task-form"),n=document.querySelector("#new-task-title"),l=document.querySelector("#new-task-desc"),d=document.querySelector("#new-task-due"),o=document.querySelector("#new-task-prio"),c=()=>{n.value="",l.value="",d.value="",o.checked=!1,t.style.display="none"};document.querySelector("#cancel-task").addEventListener("click",(e=>{e.preventDefault(),c()})),document.querySelector("#submit-task").addEventListener("click",(r=>{if(r.preventDefault(),n.value){const c=new Date(d.value?new Date(d.value.replaceAll("-","/")):new Date),r=u.at(t.dataset.index),a=r.add(n.value,l.value,c,o.checked);r.store(),e({index:a,title:n.value,desc:l.value,due:c,prio:o.checked})}c()}))}()})()})();